#!/usr/bin/env bash # /// script # Sync LLM annotations to S3 for backup and cloud access set -euo pipefail SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)" PROJECT_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)" cd "$PROJECT_ROOT" echo "Syncing LLM annotations to S3..." echo "" ANNOTATIONS_DIR="experiments/annotations_llm" S3_PATH="s3://games-collections/experiments/annotations_llm/" if [ ! -d "$ANNOTATIONS_DIR" ]; then echo "Error: Annotations directory not found: $ANNOTATIONS_DIR" exit 1 fi # Count files FILE_COUNT=$(find "$ANNOTATIONS_DIR" -name "*.jsonl" | wc -l | tr -d ' ') if [ "$FILE_COUNT" -eq 0 ]; then echo "Warning: No JSONL files found in $ANNOTATIONS_DIR" exit 0 fi echo "Found $FILE_COUNT annotation files:" find "$ANNOTATIONS_DIR" -name "*.jsonl" -exec ls -lh {} \; echo "" # Sync to S3 echo "Syncing to $S3_PATH..." s5cmd cp "$ANNOTATIONS_DIR/*.jsonl" "$S3_PATH" echo "" echo " Sync complete!" echo "" echo "Verifying S3 upload..." s5cmd ls "$S3_PATH"