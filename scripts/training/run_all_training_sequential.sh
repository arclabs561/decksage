#!/usr/bin/env bash # Run all training steps sequentially (wait for each to complete) via runctl on AWS set -euo pipefail SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)" PROJECT_ROOT="$(cd "$SCRIPT_DIR/../.." && pwd)" RUNCTL="${PROJECT_ROOT}/../runctl/target/release/runctl" OUTPUT_VERSION="${OUTPUT_VERSION:-v2024-W01}" echo "==========================================" echo "Running All Training Steps (Sequential)" echo "==========================================" echo "Output version: $OUTPUT_VERSION" echo "" # Step 1: Fine-tune instruction embeddings echo "==========================================" echo "Step 1: Fine-tuning instruction embeddings" echo "==========================================" export OUTPUT_VERSION="$OUTPUT_VERSION" bash "$SCRIPT_DIR/train_instruction_finetune_runctl.sh" echo "" # Step 2: Train co-occurrence with graph echo "==========================================" echo "Step 2: Training co-occurrence embeddings with graph" echo "==========================================" bash "$SCRIPT_DIR/train_with_graph_runctl.sh" echo "" # Step 3: Train full hybrid (including GNN) echo "==========================================" echo "Step 3: Training full hybrid system (co-occurrence + GNN)" echo "==========================================" SKIP_GNN=false bash "$SCRIPT_DIR/train_hybrid_full_runctl.sh" echo "" echo " All training jobs submitted!" echo "Monitor with: $RUNCTL aws monitor"