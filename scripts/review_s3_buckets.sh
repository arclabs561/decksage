#!/bin/bash # Review S3 bucket contents and organization set -euo pipefail BUCKET="s3://games-collections" echo "=" | tr '=' '=' echo "S3 BUCKET REVIEW" echo "=" | tr '=' '=' echo # Check bucket access if ! aws s3 ls "$BUCKET" &> /dev/null; then echo "Error: Cannot access bucket: $BUCKET" echo " Check AWS credentials: aws sts get-caller-identity" exit 1 fi echo " Bucket: $BUCKET" echo # Top-level directories echo "ğŸ“ Top-level directories:" aws s3 ls "$BUCKET/" 2>&1 | grep "PRE" | awk '{print " - " $2}' echo # Processed data summary echo " Processed data:" if aws s3 ls "$BUCKET/processed/" &> /dev/null; then COUNT=$(aws s3 ls "$BUCKET/processed/" --recursive 2>&1 | wc -l | tr -d ' ') SIZE=$(aws s3 ls "$BUCKET/processed/" --recursive --human-readable --summarize 2>&1 | tail -1 | awk '{print $3, $4}') echo " Files: $COUNT" echo " Size: $SIZE" echo " Key files:" aws s3 ls "$BUCKET/processed/" 2>&1 | head -10 | awk '{print " - " $4 " (" $3 ")"}' else echo " Warning: Not found" fi echo # Embeddings summary echo " Embeddings:" if aws s3 ls "$BUCKET/embeddings/" &> /dev/null; then COUNT=$(aws s3 ls "$BUCKET/embeddings/" --recursive 2>&1 | wc -l | tr -d ' ') SIZE=$(aws s3 ls "$BUCKET/embeddings/" --recursive --human-readable --summarize 2>&1 | tail -1 | awk '{print $3, $4}') echo " Files: $COUNT" echo " Size: $SIZE" echo " Key files:" aws s3 ls "$BUCKET/embeddings/" 2>&1 | head -10 | awk '{print " - " $4 " (" $3 ")"}' else echo " Warning: Not found" fi echo # Experiments summary echo " Experiments:" if aws s3 ls "$BUCKET/experiments/" &> /dev/null; then COUNT=$(aws s3 ls "$BUCKET/experiments/" --recursive 2>&1 | wc -l | tr -d ' ') SIZE=$(aws s3 ls "$BUCKET/experiments/" --recursive --human-readable --summarize 2>&1 | tail -1 | awk '{print $3, $4}') echo " Files: $COUNT" echo " Size: $SIZE" echo " Key files:" aws s3 ls "$BUCKET/experiments/" 2>&1 | head -10 | awk '{print " - " $4 " (" $3 ")"}' else echo " Warning: Not found" fi echo # Graphs summary echo " Graphs:" if aws s3 ls "$BUCKET/graphs/" &> /dev/null; then COUNT=$(aws s3 ls "$BUCKET/graphs/" --recursive 2>&1 | wc -l | tr -d ' ') SIZE=$(aws s3 ls "$BUCKET/graphs/" --recursive --human-readable --summarize 2>&1 | tail -1 | awk '{print $3, $4}') echo " Files: $COUNT" echo " Size: $SIZE" else echo " Warning: Not found" fi echo # Total bucket size echo "=" | tr '=' '=' echo "TOTAL BUCKET SIZE" echo "=" | tr '=' '=' aws s3 ls "$BUCKET/" --recursive --human-readable --summarize 2>&1 | tail -2
