
LLM Labels in Data Lineage - Summary

LLM labels fit into TWO places in the data lineage:

1. ORDER 5: Test Sets (Evaluation Labels)
   - Purpose: Ground truth labels for evaluation queries
   - Generated by: expand_test_set_with_llm
   - Format: Categorical buckets (highly_relevant, relevant, etc.) in test set JSON
   - Location: Embedded in experiments/test_set_unified_{game}.json
   - Use: Evaluation metrics (P@K, MRR, NDCG)

2. ORDER 6: Annotations (Training Labels)
   - Purpose: Similarity/substitution judgments for training signal
   - Generated by: llm_annotator, generate_llm_annotations.py
   - Format: JSONL with similarity scores, types, substitution flags
   - Location: annotations/{game}_llm_annotations.jsonl
   - Use: Converted to substitution pairs (Order 2) with 2x weight in training
   - Conversion: convert_annotations_to_substitution_pairs

Conversion Flow:
  Order 6 (LLM Annotations)
    ↓ convert_annotations_to_substitution_pairs
  Order 2 (Substitution Pairs, 2x weight)
    ↓ train_hybrid_full with --substitution-pairs
  Order 4 (Improved Embeddings)

Key Distinction:
  - Order 5 LLM labels: For EVALUATION (ground truth)
  - Order 6 LLM labels: For TRAINING (converted to pairs)
